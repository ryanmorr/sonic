/*! @ryanmorr/sonic v1.0.2 | https://github.com/ryanmorr/sonic */
"use strict";
/*! @ryanmorr/parselector v1.0.1 | https://github.com/ryanmorr/parselector */const e=new Map,t=/^(?:\\.|[\w\-\u00c0-\uFFFF])+/,s=/\\(?:([0-9a-f]{1,6} ?)|(.))/gi,n=/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^)]+\)|[^()]*)+)\2\))?/,r=/^\[((?:\\.|[\w\u00c0-\uFFFF-])+)\s*(?:(\S?=)\s*(?:(['"])([^]*?)\3|(#?(?:\\.|[\w\u00c0-\uFFFF-])*)|)|)\s*(i)?\]/;const u=window.document,o=[].filter,l={" ":(e,t,s)=>s.concat(o.call(e.querySelectorAll(t.selector),(e=>a(e,t.filters)))),">":(e,t,s)=>s.concat(o.call(e.querySelectorAll(t.selector),(s=>s.parentNode===e&&a(s,t.filters)))),"+":(e,t,s)=>{const n=e.nextElementSibling;return n&&n.matches(t.selector)&&a(n,t.filters)&&s.push(n),s},"~":(e,t,s)=>{let n=e.nextElementSibling;for(;n;)n.matches(t.selector)&&a(n,t.filters)&&s.push(n),n=n.nextElementSibling;return s}};function a(e,t){return t.every((({name:t,value:s})=>i[t](e,s)))}function c(u){return function(u){if(u=u.trim(),e.has(u))return e.get(u);let o,l=[],a=!1;const c=[],i=()=>{const e=u.match(t)[0];return p(e.length),m(e)},p=e=>{u=u.substring(e)},h=e=>{for(;f(u.charAt(e));)e++;p(e)},f=e=>" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e,m=e=>e.replace(s,((e,t,s)=>t?String.fromCharCode(parseInt(t,16)):s)),d=()=>{o={nodeName:null,attributes:[],pseudoClasses:[],pseudoElement:null}};for(d();""!==u;){const e=u.charAt(0);if(f(e))a=!0,h(1);else if(">"===e||"<"===e||"~"===e||"+"===e)(o.nodeName||o.attributes.length>0||o.pseudoClasses.length>0)&&l.push(o),l.push(e),d(),a=!1,h(1);else if(","===e)l.push(o),c.push(l),d(),l=[],a=!1,h(1);else if(a&&(l.push(o),l.push(" "),d(),a=!1),"*"===e)p(1),o.nodeName="*";else if("#"===e)p(1),o.attributes.push({name:"id",operator:"=",value:i(),ignoreCase:!1});else if("."===e)p(1),o.attributes.push({name:"class",operator:"~=",value:i(),ignoreCase:!1});else if("["===e){const e=u.match(r);p(e[0].length);const t=m(e[1]);o.attributes.push({name:t,operator:e[2]||"",value:m(e[4]||e[5]||""),ignoreCase:!!e[6]})}else if(":"===e)if(":"===u[1])p(2),o.pseudoElement=i();else{const e=u.match(n);p(e[0].length);const t=m(e[1]);o.pseudoClasses.push({name:t,value:m(e[3]||"")})}else t.test(u)&&(o.nodeName=i().toLowerCase())}return l.push(o),c.push(l),e.set(u,c),c}(u).map((e=>e.map((e=>{if("string"==typeof e)return e;const t=[],s=[];return e.nodeName&&t.push(e.nodeName),e.attributes.forEach((({name:e,value:s,operator:n,ignoreCase:r})=>{"id"===e?t.push("#",s):"class"===e?t.push(".",s):(t.push("[",e),""!==n&&(t.push(n,'"',s,'"'),r&&t.push(" i")),t.push("]"))})),e.pseudoClasses.forEach((({name:e,value:n})=>{e in i?s.push({name:e,value:n}):(t.push(":",e),""!==n&&t.push("(",n,")"))})),{filters:s,selector:0===t.length?"*":t.join("")}}))))}const i=Object.create(null);function p(e,t){return h(e,t)[0]||null}function h(e,t=u){return"string"==typeof t&&(t=p(t)),t=[t],c(e).reduce(((e,s)=>{let n=t,r=0;const u=s.length;for(;r<u;){let e=s[r++],t=l[" "];e in l&&(t=l[e],e=s[r++]),n=n.reduce(((s,n)=>t(n,e,s)),[])}return n.forEach((t=>{e.includes(t)||e.push(t)})),e}),[]).sort(((e,t)=>3-(6&e.compareDocumentPosition(t))))}exports.find=p,exports.is=function(e,t){const s=c(t)[0][0];return e.matches(s.selector)&&a(e,s.filters)},exports.pseudos=i,exports.query=h;
